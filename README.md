# VFV Toolbox
2D Vector Field Visualization using Linear Integral Convolutions

<div align="center">
  <img src="/vectorFieldSample_horz.jpg" width="70%">
</div>

VFV toolbox enables spotting the intricate details of vector fields. It uses Fast LIC method to produce texture and employs histogram determination methods to increase the contrast of output images. The toolbox provides a complete set of commands to generate LIC images and animations. The tools are arranged in a graphical user interface (GUI) for exploring vector fields with zooming capabilities.

## Requirements
* MATLAB version 6+.
* MATLAB Image Processing toolbox.

## Installation

Copy all toolbox files into one folder, then make it MATLAB current folder.
This distribution contains a compiled DLL for windows, for use in other operating systems please type:
```
> installvfv
```
This will compile external functions written in C.

# How to start

Type:
```
> testvfv
```

This brings up toolbox GUI to explore a test data set.

# Commands

* `explorevfield`: Provides a GUI for exploring vector fields.
* `previewvfield`: Make an easy preview of the vector field.
* `plotvfield`: Visualizes a vector field.
* `animvfield`: Generates an LIC animation.

VFV toolbox also includes several functions used only internally. Each of these functions includes a detailed description in its .M file.

Command Syntax:

* `explorevfield`
Provides a GUI for exploring vector fields. It offers Zoom-in, Zoom-out and Animation capabilities.
```
[RECT, LICMOVIE] = explorevfield (VX, VY)
```
brings up the GUI for the vector field by VX and VY.
 * VX and VY should contain X and Y components of the vector field. They should be M x N floating point arrays with equal sizes.
 * RECT returns the last region selected in a 4-element vector with the form [XMIN YMIN WIDTH HEIGHT].
 * LICMOVIE returns the last MATLAB movie generated by 'Make Animation' command.


* `previewvfield`
Provides an easy preview of the vector field using LIC method. It automatically resizes the vector field to a convenient size.
```
[PREVIEW,ZOOMFACTOR] = previewvfield(VX, VY, COLORMAP, MAXDIMENSION);
```
 * PREVIEW returns the generated colored LIC image.
 * ZOOMFACTOR returns the zoom factor being used.
 * VX and VY should contain X and Y components of the vector field. They should be M x N floating point arrays with equal sizes.
 * COLORMAP is a standard MATLAB colormap array (an M-by-3 matrix) used by this function to convert scalar values to colors.
 * MAXDIMENSION is the largest preview image dimension. Field is resized in a manner that the largest dimension of the output image will be MAXDIMENSION.

 Example:
```
previewvfield(vx,vy);
```
* `plotvfield`
Uses LIC method to visualize a vector field:
```
FINALLIC = plotvfield(VX, VY, ZOOMFACTOR, ITERATIONS, COLORMAP, RECT, METHOD)
```
makes a colored LIC image and returns it in FINALLIC.
 * VX and VY should contain X and Y components of the vector field. They should be M x N floating point arrays with equal sizes.
 * ZOOMFACTOR should be a floating point number for magnification of an area indicated in RECT parameter. If this parameter is not specified, default value of 1.0 will be used.
 * ITERATIONS is an integer number for the number of iterations used in Iterative LIC method. Use number 2 or 3 to get a more coherent output image.
 * COLORMAP is a standard MATLAB colormap array (an M-by-3 matrix) used by this function to convert scalar values to colors.
 * RECT is a 4-element vector with the form [XMIN YMIN WIDTH HEIGHT]; these values are specified in spatial coordinates of vector field (VX and VY arrays). Input field will first cropped to this region then zoomed using ZOOMFACTOR. If this parameter is not specified, the entire area of the field will be zoomed.
 * METHOD specifies which implementation of LIC should be used. Default method is using externally implemented Fast LIC method.
   * Use `'ef'` for externally implemented Fast LIC method.
   * Use `'f'` for internally implemented Fast LIC method.
   * Use `'r'` for internally implemented Regular LIC method.
Example:
 ```
LICimage = plotvfield(vx,vy);
```
(vx, vy are M x N matrices)
This makes a LIC image stores it in LICimage variable.


* `animvfield`
Uses Animated LIC method to generate an animation showing the direction of a steady-flow (time-invariant) vector field by apparent motion:
```
LICMOVIE = `animvfield`(VX, VY, ZOOMFACTOR, FRAMES, COLORMAP, RECT)
```
makes a MATLAB movie and returns it in LICMOVIE.

 * VX and VY should contain X and Y components of the vector field. They should be M x N floating point arrays with equal sizes.
 * ZOOMFACTOR should be a floating point number for magnification of an area indicated in RECT parameter. If this parameter is not specified, default value of 1.0 will be used.
 * FRAMES should contain an integer for the number of animation frames. If this parameter is not specified, default value of 10 will be used.
 * COLORMAP is a standard MATLAB colormap array (an M-by-3 matrix) used by this function to convert scalar values to colors.
 * RECT is a 4-element vector with the form [XMIN YMIN WIDTH HEIGHT]; these values are specified in spatial coordinates of vector field (VX and VY arrays). Input field will first get cropped to this region then zoomed using ZOOMFACTOR. If this parameter is not specified, the entire area of the field will be zoomed.
